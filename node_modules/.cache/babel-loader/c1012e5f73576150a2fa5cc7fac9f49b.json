{"ast":null,"code":"import _objectSpread from\"/Users/Maxfield/Desktop/seamlessgutters/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/Maxfield/Desktop/seamlessgutters/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/Maxfield/Desktop/seamlessgutters/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{useState,useCallback,useEffect,useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SCROLL_BOX_MIN_HEIGHT=20;export default function CustomScrollDiv(_ref){var children=_ref.children,className=_ref.className,restProps=_objectWithoutProperties(_ref,[\"children\",\"className\"]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),hovering=_useState2[0],setHovering=_useState2[1];var _useState3=useState(SCROLL_BOX_MIN_HEIGHT),_useState4=_slicedToArray(_useState3,2),scrollBoxHeight=_useState4[0],setScrollBoxHeight=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),scrollBoxTop=_useState6[0],setScrollBoxTop=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),lastScrollThumbPosition=_useState8[0],setScrollThumbPosition=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isDragging=_useState10[0],setDragging=_useState10[1];var handleMouseOver=useCallback(function(){!hovering&&setHovering(true);},[hovering]);var handleMouseOut=useCallback(function(){!!hovering&&setHovering(false);},[hovering]);var handleDocumentMouseUp=useCallback(function(e){if(isDragging){e.preventDefault();setDragging(false);}},[isDragging]);var handleDocumentMouseMove=useCallback(function(e){if(isDragging){e.preventDefault();e.stopPropagation();var scrollHostElement=scrollHostRef.current;var scrollHeight=scrollHostElement.scrollHeight,offsetHeight=scrollHostElement.offsetHeight;var deltaY=e.clientY-lastScrollThumbPosition;var percentage=deltaY*(scrollHeight/offsetHeight);setScrollThumbPosition(e.clientY);setScrollBoxTop(Math.min(Math.max(0,scrollBoxTop+deltaY),offsetHeight-scrollBoxHeight));scrollHostElement.scrollTop=Math.min(scrollHostElement.scrollTop+percentage,scrollHeight-offsetHeight);}},[isDragging,lastScrollThumbPosition,scrollBoxHeight,scrollBoxTop]);var handleScrollThumbMouseDown=useCallback(function(e){e.preventDefault();e.stopPropagation();setScrollThumbPosition(e.clientY);setDragging(true);console.log(\"handleScrollThumbMouseDown\");},[]);var handleScroll=useCallback(function(){if(!scrollHostRef){return;}var scrollHostElement=scrollHostRef.current;var scrollTop=scrollHostElement.scrollTop,scrollHeight=scrollHostElement.scrollHeight,offsetHeight=scrollHostElement.offsetHeight;var newTop=parseInt(scrollTop,10)/parseInt(scrollHeight,10)*offsetHeight;// newTop = newTop + parseInt(scrollTop, 10);\nnewTop=Math.min(newTop,offsetHeight-scrollBoxHeight);setScrollBoxTop(newTop);},[]);var scrollHostRef=useRef();useEffect(function(){var scrollHostElement=scrollHostRef.current;var clientHeight=scrollHostElement.clientHeight,scrollHeight=scrollHostElement.scrollHeight;var scrollThumbPercentage=clientHeight/scrollHeight;var scrollThumbHeight=Math.max(scrollThumbPercentage*clientHeight,SCROLL_BOX_MIN_HEIGHT);setScrollBoxHeight(scrollThumbHeight);scrollHostElement.addEventListener(\"scroll\",handleScroll,true);return function cleanup(){scrollHostElement.removeEventListener(\"scroll\",handleScroll,true);};},[]);useEffect(function(){//this is handle the dragging on scroll-thumb\ndocument.addEventListener(\"mousemove\",handleDocumentMouseMove);document.addEventListener(\"mouseup\",handleDocumentMouseUp);document.addEventListener(\"mouseleave\",handleDocumentMouseUp);return function cleanup(){document.removeEventListener(\"mousemove\",handleDocumentMouseMove);document.removeEventListener(\"mouseup\",handleDocumentMouseUp);document.removeEventListener(\"mouseleave\",handleDocumentMouseUp);};},[handleDocumentMouseMove,handleDocumentMouseUp]);return/*#__PURE__*/_jsxs(\"div\",{className:\"scrollhost-container\",onMouseOver:handleMouseOver,onMouseOut:handleMouseOut,children:[/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({ref:scrollHostRef,className:\"scrollhost \".concat(className)},restProps),{},{children:children})),/*#__PURE__*/_jsx(\"div\",{className:\"scroll-bar\",style:{opacity:hovering?1:0},children:/*#__PURE__*/_jsx(\"div\",{className:\"scroll-thumb\",style:{top:scrollBoxTop},onMouseDown:handleScrollThumbMouseDown})})]});}","map":{"version":3,"sources":["/Users/Maxfield/Desktop/seamlessgutters/src/components/CustomScrollDiv.js"],"names":["React","useState","useCallback","useEffect","useRef","SCROLL_BOX_MIN_HEIGHT","CustomScrollDiv","children","className","restProps","hovering","setHovering","scrollBoxHeight","setScrollBoxHeight","scrollBoxTop","setScrollBoxTop","lastScrollThumbPosition","setScrollThumbPosition","isDragging","setDragging","handleMouseOver","handleMouseOut","handleDocumentMouseUp","e","preventDefault","handleDocumentMouseMove","stopPropagation","scrollHostElement","scrollHostRef","current","scrollHeight","offsetHeight","deltaY","clientY","percentage","Math","min","max","scrollTop","handleScrollThumbMouseDown","console","log","handleScroll","newTop","parseInt","clientHeight","scrollThumbPercentage","scrollThumbHeight","addEventListener","cleanup","removeEventListener","document","opacity","top"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect, useRef } from \"react\";\n\nconst SCROLL_BOX_MIN_HEIGHT = 20;\n\nexport default function CustomScrollDiv({ children, className, ...restProps }) {\n  const [hovering, setHovering] = useState(false);\n  const [scrollBoxHeight, setScrollBoxHeight] = useState(SCROLL_BOX_MIN_HEIGHT);\n  const [scrollBoxTop, setScrollBoxTop] = useState(0);\n  const [lastScrollThumbPosition, setScrollThumbPosition] = useState(0);\n  const [isDragging, setDragging] = useState(false);\n\n  const handleMouseOver = useCallback(() => {\n    !hovering && setHovering(true);\n  }, [hovering]);\n\n  const handleMouseOut = useCallback(() => {\n    !!hovering && setHovering(false);\n  }, [hovering]);\n\n  const handleDocumentMouseUp = useCallback(\n    e => {\n      if (isDragging) {\n        e.preventDefault();\n        setDragging(false);\n      }\n    },\n    [isDragging]\n  );\n\n  const handleDocumentMouseMove = useCallback(\n    e => {\n      if (isDragging) {\n        e.preventDefault();\n        e.stopPropagation();\n        const scrollHostElement = scrollHostRef.current;\n        const { scrollHeight, offsetHeight } = scrollHostElement;\n\n        let deltaY = e.clientY - lastScrollThumbPosition;\n        let percentage = deltaY * (scrollHeight / offsetHeight);\n\n        setScrollThumbPosition(e.clientY);\n        setScrollBoxTop(\n          Math.min(\n            Math.max(0, scrollBoxTop + deltaY),\n            offsetHeight - scrollBoxHeight\n          )\n        );\n        scrollHostElement.scrollTop = Math.min(\n          scrollHostElement.scrollTop + percentage,\n          scrollHeight - offsetHeight\n        );\n      }\n    },\n    [isDragging, lastScrollThumbPosition, scrollBoxHeight, scrollBoxTop]\n  );\n\n  const handleScrollThumbMouseDown = useCallback(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setScrollThumbPosition(e.clientY);\n    setDragging(true);\n    console.log(\"handleScrollThumbMouseDown\");\n  }, []);\n\n  const handleScroll = useCallback(() => {\n    if (!scrollHostRef) {\n      return;\n    }\n    const scrollHostElement = scrollHostRef.current;\n    const { scrollTop, scrollHeight, offsetHeight } = scrollHostElement;\n\n    let newTop =\n      (parseInt(scrollTop, 10) / parseInt(scrollHeight, 10)) * offsetHeight;\n    // newTop = newTop + parseInt(scrollTop, 10);\n    newTop = Math.min(newTop, offsetHeight - scrollBoxHeight);\n    setScrollBoxTop(newTop);\n  }, []);\n\n  const scrollHostRef = useRef();\n\n  useEffect(() => {\n    const scrollHostElement = scrollHostRef.current;\n    const { clientHeight, scrollHeight } = scrollHostElement;\n    const scrollThumbPercentage = clientHeight / scrollHeight;\n    const scrollThumbHeight = Math.max(\n      scrollThumbPercentage * clientHeight,\n      SCROLL_BOX_MIN_HEIGHT\n    );\n    setScrollBoxHeight(scrollThumbHeight);\n    scrollHostElement.addEventListener(\"scroll\", handleScroll, true);\n    return function cleanup() {\n      scrollHostElement.removeEventListener(\"scroll\", handleScroll, true);\n    };\n  }, []);\n\n  useEffect(() => {\n    //this is handle the dragging on scroll-thumb\n    document.addEventListener(\"mousemove\", handleDocumentMouseMove);\n    document.addEventListener(\"mouseup\", handleDocumentMouseUp);\n    document.addEventListener(\"mouseleave\", handleDocumentMouseUp);\n    return function cleanup() {\n      document.removeEventListener(\"mousemove\", handleDocumentMouseMove);\n      document.removeEventListener(\"mouseup\", handleDocumentMouseUp);\n      document.removeEventListener(\"mouseleave\", handleDocumentMouseUp);\n    };\n  }, [handleDocumentMouseMove, handleDocumentMouseUp]);\n\n  return (\n    <div\n      className={\"scrollhost-container\"}\n      onMouseOver={handleMouseOver}\n      onMouseOut={handleMouseOut}\n    >\n      <div\n        ref={scrollHostRef}\n        className={`scrollhost ${className}`}\n        {...restProps}\n      >\n        {children}\n      </div>\n      <div className={\"scroll-bar\"} style={{ opacity: hovering ? 1 : 0 }}>\n        <div\n          className={\"scroll-thumb\"}\n          style={{ top: scrollBoxTop }}\n          onMouseDown={handleScrollThumbMouseDown}\n        />\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}